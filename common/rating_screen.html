<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>FoodConnect - è©•åˆ†</title>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { 
            "primary": "#4CAF50",
            "secondary": "#FF9800",
          },
          fontFamily: { "display": ["Inter"] },
        },
      },
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <style>
    .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
    .star-btn { transition: all 0.2s; }
    .star-btn:hover { transform: scale(1.2); }
  </style>
</head>
<body class="bg-gray-50 font-display">
  <div class="max-w-md mx-auto min-h-screen flex flex-col">
    
    <!-- Header - Mobile App Style -->
    <header class="bg-white px-4 py-4 border-b border-gray-200 flex items-center gap-3">
      <button onclick="history.back()" class="p-2 -ml-2 rounded-full hover:bg-gray-100">
        <span class="material-symbols-outlined">close</span>
      </button>
      <h1 class="text-xl font-bold flex-1">ç‚ºé€™æ¬¡äº¤æ˜“è©•åˆ†</h1>
    </header>

    <main class="flex-grow overflow-y-auto p-6 space-y-6">
      
      <!-- Transaction Info -->
      <div class="bg-white rounded-xl p-4 shadow-sm">
        <div class="flex gap-3">
          <img src="https://images.unsplash.com/photo-1628776047620-c8f41409e15a?w=200&h=200&fit=crop" alt="Food" class="w-16 h-16 rounded-lg object-cover"/>
          <div>
            <h3 class="font-bold">ä»Šæ—¥æ¹¯å“</h3>
            <p class="text-sm text-gray-600">ç¶ è‰²é¤å»³</p>
            <p class="text-xs text-gray-400 mt-1">3å¤©å‰é ˜å–</p>
          </div>
        </div>
      </div>

      <!-- FR-22: Mutual Rating System -->
      <!-- Rating Section -->
      <div class="bg-white rounded-xl p-6 shadow-sm">
        <h2 class="text-lg font-bold mb-4 text-center">æ‚¨å°é€™æ¬¡é«”é©—çš„è©•åƒ¹ï¼Ÿ</h2>
        
        <!-- Star Rating -->
        <div class="flex justify-center gap-2 mb-6">
          <button class="star-btn" onclick="setRating(1)">
            <span id="star-1" class="material-symbols-outlined text-5xl text-gray-300">star</span>
          </button>
          <button class="star-btn" onclick="setRating(2)">
            <span id="star-2" class="material-symbols-outlined text-5xl text-gray-300">star</span>
          </button>
          <button class="star-btn" onclick="setRating(3)">
            <span id="star-3" class="material-symbols-outlined text-5xl text-gray-300">star</span>
          </button>
          <button class="star-btn" onclick="setRating(4)">
            <span id="star-4" class="material-symbols-outlined text-5xl text-gray-300">star</span>
          </button>
          <button class="star-btn" onclick="setRating(5)">
            <span id="star-5" class="material-symbols-outlined text-5xl text-gray-300">star</span>
          </button>
        </div>

        <p id="rating-text" class="text-center text-gray-400 mb-6">é»æ“Šæ˜Ÿæ˜Ÿè©•åˆ†</p>

        <!-- Comment -->
        <div>
          <label class="block text-sm font-semibold mb-2">åˆ†äº«æ‚¨çš„é«”é©—ï¼ˆé¸å¡«ï¼‰</label>
          <textarea 
            id="comment" 
            rows="4" 
            placeholder="é£Ÿç‰©å“è³ªå¦‚ä½•ï¼Ÿæè´ˆè€…å‹å–„å—ï¼Ÿ" 
            class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none resize-none"
          ></textarea>
          <p class="text-xs text-gray-500 mt-2">ğŸ’¡ æ‚¨çš„è©•è«–å°‡åŒ¿åé¡¯ç¤ºï¼Œå¹«åŠ©å…¶ä»–ç”¨æˆ¶åšå‡ºé¸æ“‡</p>
        </div>

      </div>

      <!-- Quick Tags (Optional) -->
      <div class="bg-white rounded-xl p-4 shadow-sm">
        <label class="block text-sm font-semibold mb-3">å¿«é€Ÿæ¨™ç±¤ï¼ˆé¸å¡«ï¼‰</label>
        <div class="flex flex-wrap gap-2">
          <button class="px-3 py-1.5 rounded-full border-2 border-gray-300 text-sm font-medium hover:border-primary hover:bg-primary/5 transition-all" onclick="toggleTag(this)">
            ğŸ² é£Ÿç‰©æ–°é®®
          </button>
          <button class="px-3 py-1.5 rounded-full border-2 border-gray-300 text-sm font-medium hover:border-primary hover:bg-primary/5 transition-all" onclick="toggleTag(this)">
            ğŸ“¦ ä»½é‡å……è¶³
          </button>
          <button class="px-3 py-1.5 rounded-full border-2 border-gray-300 text-sm font-medium hover:border-primary hover:bg-primary/5 transition-all" onclick="toggleTag(this)">
            ğŸ˜Š å‹å–„
          </button>
          <button class="px-3 py-1.5 rounded-full border-2 border-gray-300 text-sm font-medium hover:border-primary hover:bg-primary/5 transition-all" onclick="toggleTag(this)">
            â° æº–æ™‚
          </button>
          <button class="px-3 py-1.5 rounded-full border-2 border-gray-300 text-sm font-medium hover:border-primary hover:bg-primary/5 transition-all" onclick="toggleTag(this)">
            ğŸ“ ä½ç½®æ–¹ä¾¿
          </button>
        </div>
      </div>

      <!-- Privacy Notice (Scenario 2 - Trust Building) -->
      <div class="bg-green-50 border border-green-200 rounded-xl p-4 text-sm">
        <p class="text-green-900 font-semibold mb-1">ğŸ”’ é—œæ–¼è©•åˆ†ç³»çµ±</p>
        <ul class="text-green-800 space-y-1 text-xs">
          <li>â€¢ è©•åˆ†å°‡<strong>åŒ¿åé¡¯ç¤º</strong>ï¼Œä¿è­·æ‚¨çš„éš±ç§</li>
          <li>â€¢ è©•åˆ†æœ‰åŠ©æ–¼å»ºç«‹ä¿¡ä»»ç¤¾ç¾¤ï¼Œè­˜åˆ¥å„ªè³ªæè´ˆè€…</li>
          <li>â€¢ ä¸ç•¶è©•è«–å°‡è¢«å¯©æ ¸ä¸¦å¯èƒ½ç§»é™¤</li>
        </ul>
      </div>

    </main>

    <!-- Submit Button -->
    <div class="p-4 bg-white border-t border-gray-200">
      <button id="submit-btn" onclick="submitRating()" disabled class="w-full bg-gray-300 text-gray-500 py-4 rounded-2xl font-bold text-lg cursor-not-allowed">
        æäº¤è©•åˆ†
      </button>
      <button onclick="skipRating()" class="w-full text-gray-500 py-3 text-sm font-medium mt-2">
        æš«æ™‚è·³é
      </button>
    </div>

  </div>

  <script src="ui_components.js"></script>
  <script>
    let currentRating = 0;

    function setRating(rating) {
      currentRating = rating;
      
      // Update stars
      for (let i = 1; i <= 5; i++) {
        const star = document.getElementById(`star-${i}`);
        if (i <= rating) {
          star.className = 'material-symbols-outlined text-5xl text-yellow-500';
          star.style.fontVariationSettings = "'FILL' 1";
        } else {
          star.className = 'material-symbols-outlined text-5xl text-gray-300';
          star.style.fontVariationSettings = "'FILL' 0";
        }
      }

      // Update text
      const texts = ['', 'å¾ˆå·®', 'ä¸å¥½', 'æ™®é€š', 'å¾ˆå¥½', 'éå¸¸å¥½'];
      document.getElementById('rating-text').textContent = texts[rating];
      document.getElementById('rating-text').className = 'text-center text-yellow-600 font-semibold mb-6';

      // Enable submit button
      const submitBtn = document.getElementById('submit-btn');
      submitBtn.disabled = false;
      submitBtn.className = 'w-full bg-gradient-to-r from-primary to-green-600 text-white py-4 rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all';
    }

    function toggleTag(btn) {
      if (btn.classList.contains('border-primary')) {
        btn.classList.remove('border-primary', 'bg-primary/5', 'text-primary');
        btn.classList.add('border-gray-300');
      } else {
        btn.classList.remove('border-gray-300');
        btn.classList.add('border-primary', 'bg-primary/5', 'text-primary');
      }
    }

    function submitRating() {
      if (currentRating === 0) {
        showToast('è«‹å…ˆé¸æ“‡è©•åˆ†', 'warning');
        return;
      }

      const comment = document.getElementById('comment').value;
      
      showSuccess(
        'è©•åˆ†å·²æäº¤ï¼',
        `è©•åˆ†: ${currentRating} æ˜Ÿ\n${comment ? 'è©•è«–: ' + comment : ''}\n\næ„Ÿè¬æ‚¨çš„åé¥‹ï¼Œé€™æœ‰åŠ©æ–¼å»ºç«‹æ›´å¥½çš„ç¤¾ç¾¤ï¼`,
        'å®Œæˆ',
        () => { history.back(); }
      );
    }

    function skipRating() {
      if (confirm('ç¢ºå®šè¦è·³éè©•åˆ†å—ï¼Ÿ\n\næ‚¨å¯ä»¥ç¨å¾Œåœ¨ã€Œæˆ‘çš„é ˜å–ã€ä¸­è£œå……è©•åˆ†ã€‚')) {
        history.back();
      }
    }
  </script>
</body>
</html>

